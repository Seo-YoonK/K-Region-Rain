import streamlit as st
import pandas as pd
import re

# ------------------------
# âœ… CSV ì§ì ‘ ë¶ˆëŸ¬ì˜¤ê¸°
# ------------------------
file_path = "rn_20250717112859.csv"  # ê°™ì€ í´ë”ì— ìœ„ì¹˜í•´ì•¼ í•¨
df = pd.read_csv(file_path, encoding="EUC-KR")

# ------------------------
# âœ… ë°ì´í„° ì „ì²˜ë¦¬
# ------------------------
# ì§€ì—­ëª…ì—ì„œ ê´„í˜¸ì™€ ìˆ«ì ì œê±° (ì˜ˆ: "ì†ì´ˆ(90)" â†’ "ì†ì´ˆ")
df['ì§€ì ì •ë³´'] = df['ì§€ì ì •ë³´'].apply(lambda x: re.sub(r"\(.*?\)", "", str(x)).strip())

# ì»¬ëŸ¼ëª… ë³€ê²½ (Streamlitì—ì„œ ë³´ê¸° ì‰½ê²Œ)
df = df.rename(columns={"ì§€ì ì •ë³´": "ì§€ì—­", "ê°•ìˆ˜ëŸ‰(mm)": "ê°•ìˆ˜ëŸ‰"})

# ------------------------
# âœ… Streamlit UI
# ------------------------
st.title("ğŸ“Š ì§€ì—­ë³„ ê°•ìˆ˜ëŸ‰ ì‹œê°í™”")
st.write("ì´ ì•±ì€ CSV ë°ì´í„°ë¥¼ ì´ìš©í•´ ì§€ì—­ë³„ ê°•ìˆ˜ëŸ‰ì„ ì‹œê°í™”í•©ë‹ˆë‹¤.")

# âœ… ì „ì²˜ë¦¬ëœ ë°ì´í„° í‘œì‹œ
st.subheader("ì „ì²˜ë¦¬ëœ ë°ì´í„°")
st.dataframe(df)

# âœ… ê°•ìˆ˜ëŸ‰ ì„  ê·¸ë˜í”„
st.subheader("ì§€ì—­ë³„ ê°•ìˆ˜ëŸ‰ ì„  ê·¸ë˜í”„")
df_graph = df.set_index('ì§€ì—­')[['ê°•ìˆ˜ëŸ‰']]
st.line_chart(df_graph)
